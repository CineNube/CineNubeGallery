<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>CatÃ¡logo | CineNube Gallery</title>
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css">
<style>
body {
  background-color: #0d0d0d;
  color: #fff;
  font-family: 'Poppins', sans-serif;
}
header { text-align: center; padding: 2rem 0; }
.card {
  background-color: #1a1a1a;
  border: none;
  border-radius: 12px;
  overflow: hidden;
  transition: transform 0.2s ease;
}
.card:hover { transform: scale(1.05); }
.card img {
  width: 100%;
  height: 340px;
  object-fit: cover;
}
.card-body { padding: 1rem; }
.btn-ver {
  background-color: #e50914;
  color: #fff;
  border: none;
  border-radius: 20px;
  padding: 6px 14px;
  text-decoration: none;
  display: inline-block;
}
h2 {
  border-left: 4px solid #e50914;
  padding-left: 10px;
  margin-bottom: 1rem;
}
footer {
  text-align: center;
  padding: 2rem;
  color: #aaa;
}
</style>
</head>
<body>
<header>
  <h1>ğŸï¸ CatÃ¡logo CineNube</h1>
</header>

<div class="container">
  <h2>ğŸ¥ PelÃ­culas</h2>
  <div id="peliculas" class="row g-3"></div>

  <h2>ğŸ“º Series</h2>
  <div id="series" class="row g-3"></div>
</div>

<footer>Â© 2025 CineNube Gallery</footer>

<script>
const SHEET_URL = "https://script.google.com/macros/s/AKfycbz0AxlhwQ5-8hnnRMnhP8S-i0xQoUg3iWoEYXbT5o_ltCpR7mAIZqPaHqccFzkC34cLbw/exec";

async function cargarCatalogo() {
  try {
    const res = await fetch(SHEET_URL);
    const data = await res.json();
    const ordenado = data.reverse();

    const peliculas = ordenado.filter(i => i.type?.toLowerCase() === "pelicula");
    const series = ordenado.filter(i => i.type?.toLowerCase() === "serie");

    mostrarCatalogo(peliculas, "peliculas");
    mostrarCatalogo(series, "series");
  } catch (err) {
    console.error("Error al cargar catÃ¡logo:", err);
  }
}

function mostrarCatalogo(lista, id) {
  const cont = document.getElementById(id);
  cont.innerHTML = "";
  lista.forEach(item => {
    const imagen = item.poster?.startsWith("http")
      ? item.poster
      : `https://image.tmdb.org/t/p/w500${item.poster}`;
    const boton = item.type?.toLowerCase() === "serie" && item.season_links
      ? `<a href="${item.season_links}" target="_blank" class="btn-ver">ğŸ“º Ver temporadas</a>`
      : "";
    const card = `
      <div class="col-6 col-md-3">
        <div class="card">
          <img src="${imagen}" alt="${item.title}">
          <div class="card-body">
            <h5 class="card-title">${item.title || "Sin tÃ­tulo"}</h5>
            <p>â­ï¸ ${item.rating || "N/A"} | ğŸ“… ${item.year || ""}</p>
            ${boton}
          </div>
        </div>
      </div>`;
    cont.innerHTML += card;
  });
}

cargarCatalogo();
</script>
</body>
</html>
