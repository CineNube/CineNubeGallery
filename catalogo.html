<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>CineNube Catalogo</title>
<link rel="stylesheet" href="style.css">
</head>
<body>
<header>
  <h1>CineNube Catalogo</h1>
</header>
<div class="grid" id="grid"></div>
<script>
const SHEET_JSON_URL = "https://script.google.com/macros/s/AKfycbx1Vq5HqmPMExtgm1PRgct2WRzGex5BTEtDERIKHA20VZNFf-umdHpiKD94Df80S2vO1g/exec";
fetch(SHEET_JSON_URL)
  .then(res=>res.json())
  .then(items=>{
    items.sort((a,b)=>b.published_ts-a.published_ts);
    const grid=document.getElementById('grid');
    items.forEach(i=>{
      let card=document.createElement('div');
      card.className='card';
      card.innerHTML=`
        <img src="${i.poster}" alt="${i.title}">
        <div class="card-content">
          <div class="card-title">${i.title}</div>
          <div class="card-overview">${i.overview.length>120 ? i.overview.slice(0,120)+'...' : i.overview}</div>
          <div class="card-meta">â­ ${i.rating || 'N/A'} | ğŸ“… ${i.year || ''}</div>
          <div class="votes">
            <span class="up">ğŸ‘ ${i.vote_count && i.vote_average ? Math.round(i.vote_count*(i.vote_average/10)) : 0}</span>
            <span class="down">ğŸ‘ ${i.vote_count && i.vote_average ? i.vote_count-Math.round(i.vote_count*(i.vote_average/10)) : 0}</span>
          </div>
          <div class="seasons">
            ${i.season_links && i.season_links.length>0 ? i.season_links.map(s=>s.link?`<a href="${s.link}" target="_blank" class="season-btn">Temporada ${s.season}</a>`:'').join('') : ''}
          </div>
        </div>
      `;
      grid.appendChild(card);
    });
  });
</script>
</body>
</html>
