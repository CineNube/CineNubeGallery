<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Catalogo CineNube</title>
<style>
body{margin:0;padding:0;font-family:'Segoe UI',Arial,sans-serif;background:#0e0e0e;color:#fff}
header{background:#1c1c1c;padding:18px;text-align:center;font-size:24px;font-weight:700;color:#00aaff;box-shadow:0 0 8px rgba(0,0,0,.5)}
#sheetData{width:100%;border-collapse:collapse;margin:0;padding:0}
#sheetData th, #sheetData td{border:1px solid #222;padding:6px;font-size:13px;color:#fff;text-align:left}
#sheetData th{background:#141414;color:#00aaff;position:sticky;top:0;z-index:1}
#sheetData tr:nth-child(even){background:#111}
.searchInput{width:320px;max-width:90%;padding:6px 10px;margin:12px;border-radius:8px;border:1px solid #2b2b2b;background:#0f0f0f;color:#fff}
.empty{padding:40px;text-align:center;color:#aaa}
</style>
</head>
<body>
<header>ðŸ“„ CatÃ¡logo Completo CineNube</header>
<input type="text" id="searchInput" class="searchInput" placeholder="Filtrar por tÃ­tulo, gÃ©nero, aÃ±o...">
<table id="sheetData"><thead><tr>
<th>TMDB_ID</th><th>type</th><th>title</th><th>poster</th><th>overview</th><th>rating</th><th>year</th><th>updated</th><th>season_links</th><th>terabox</th><th>Idioma</th><th>Enviar</th><th>Enviado</th><th>generos</th><th>Actualizar</th><th>published_at</th>
</tr></thead><tbody></tbody></table>
<div id="emptyMsg" class="empty" style="display:none">No hay resultados</div>
<script>
const SHEET_URL='https://script.google.com/macros/s/AKfycbz0AxlhwQ5-8hnnRMnhP8S-i0xQoUg3iWoEYXbT5o_ltCpR7mAIZqPaHqccFzkC34cLbw/exec';
let allData=[];
async function loadTable(){
  try{
    const res=await fetch(SHEET_URL);
    const data=await res.json();
    if(!Array.isArray(data)){document.getElementById('emptyMsg').style.display='block';return;}
    allData=data;
    renderTable(allData);
  }catch(e){console.error(e);document.getElementById('emptyMsg').style.display='block'}
}
function renderTable(list){
  const tbody=document.querySelector('#sheetData tbody');
  tbody.innerHTML='';
  if(!list.length){document.getElementById('emptyMsg').style.display='block';return}else document.getElementById('emptyMsg').style.display='none';
  list.forEach(r=>{
    const tr=document.createElement('tr');
    ['TMDB_ID','type','title','poster','overview','rating','year','updated','season_links','terabox','Idioma','Enviar','Enviado','generos','Actualizar','published_at'].forEach(k=>{
      const td=document.createElement('td');td.textContent=r[k]||'';tr.appendChild(td);
    });
    tbody.appendChild(tr);
  });
}
const searchInput=document.getElementById('searchInput');
searchInput.addEventListener('input',()=>{const q=searchInput.value.toLowerCase();renderTable(allData.filter(r=>Object.values(r).some(v=>v&&(v+'').toLowerCase().includes(q))))});
loadTable();
</script>
</body>
</html>
