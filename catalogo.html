<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>üìö Cat√°logo - CineNube Gallery</title>
<style>
body{font-family:Arial,sans-serif;background:#0e0e0e;color:#fff;margin:0;padding:0;}
header{text-align:center;background:#141414;padding:20px;box-shadow:0 2px 10px rgba(0,0,0,0.5);}
h1{font-size:2em;color:#ff4444;margin-bottom:10px;}
nav{display:flex;justify-content:center;gap:10px;flex-wrap:wrap;}
nav button{background:#ff4444;color:white;border:none;padding:8px 16px;border-radius:20px;cursor:pointer;transition:.3s;}
nav button:hover{background:#ff6666;}
.grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(200px,1fr));gap:15px;padding:20px;}
.card{background:#1c1c1c;border-radius:10px;overflow:hidden;box-shadow:0 2px 8px rgba(0,0,0,0.3);transition:transform .3s;}
.card:hover{transform:scale(1.03);}
.poster{width:100%;height:300px;object-fit:cover;}
.content{padding:10px;}
.title{font-size:1.1em;font-weight:bold;margin:5px 0;color:#ff4444;}
.desc{color:#ccc;font-size:.9em;margin-top:5px;}
footer{text-align:center;padding:20px;background:#141414;color:#aaa;font-size:.9em;}
a{color:#ff4444;text-decoration:none;}
.link{display:block;background:#ff4444;color:white;text-align:center;padding:8px;margin-top:10px;border-radius:5px;font-weight:bold;}
.link:hover{background:#ff6666;}
</style>
</head>
<body>
<header>
<h1>üìö Cat√°logo Completo</h1>
<nav>
  <button onclick="filterContent('all')">üî• Todo</button>
  <button onclick="filterContent('pelicula')">üé• Pel√≠culas</button>
  <button onclick="filterContent('serie')">üì∫ Series</button>
</nav>
</header>
<div id="catalog" class="grid"></div>
<footer>‚¨ÖÔ∏è Volver al inicio: <a href="index.html">CineNube Gallery</a></footer>
<script>
const SHEET_URL='https://script.google.com/macros/s/AKfycbz0AxlhwQ5-8hnnRMnhP8S-i0xQoUg3iWoEYXbT5o_ltCpR7mAIZqPaHqccFzkC34cLbw/exec';
let allData=[];

async function loadCatalog(){
  try{
    const res=await fetch(SHEET_URL);
    const data=await res.json();
    allData=data.map(item=>({...item, published_at_parsed:new Date(item.published_at)}))
                .sort((a,b)=>b.published_at_parsed - a.published_at_parsed);
    renderCatalog(allData);
  }catch(e){
    document.getElementById('catalog').innerHTML='<p style="text-align:center;color:#ccc;">Error cargando datos</p>';
    console.error(e);
  }
}

function renderCatalog(items){
  const catalog=document.getElementById('catalog'); catalog.innerHTML='';
  items.forEach(item=>{
    const card=document.createElement('div');
    card.className='card';
    card.dataset.type=(item.type||'pelicula').toLowerCase();
    card.innerHTML=`
      <img src="${item.poster}" alt="${item.title}" class="poster">
      <div class="content">
        <div class="title">${item.title}</div>
        <div class="desc">${item.overview||'Sin descripci√≥n'}</div>
        <a href="${item.terabox||'#'}" target="_blank" class="link">Ver / Descargar</a>
      </div>`;
    catalog.appendChild(card);
  });
}

function filterContent(type){
  if(type==='all'){renderCatalog(allData);}
  else{renderCatalog(allData.filter(x=>(x.type||'').toLowerCase()===type));}
}

loadCatalog();
</script>
</body>
</html>
