<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<title>CineNube - CatÃ¡logo</title>
<style>
 body { background:#111; color:#fff; margin:0; font-family:Arial; }
 header { padding:15px; display:flex; gap:10px; flex-wrap:wrap; justify-content:center; }
 header button { background:#222; color:#fff; border:none; padding:10px 15px; cursor:pointer; border-radius:6px; }
 header button:hover { background:#444; }
 #search { width:90%; max-width:500px; margin:10px auto; display:block; padding:10px; border-radius:6px; border:none; font-size:16px; }
 .catalog-container { display:grid; grid-template-columns:repeat(auto-fill,minmax(160px,1fr)); gap:15px; padding:20px; }
 .card { background:#1a1a1a; border-radius:8px; padding:10px; text-align:center; cursor:pointer; transition:.3s; }
 .card:hover { transform:scale(1.05); }
 .card img { width:100%; border-radius:6px; }
 .tag { display:inline-block; margin-top:5px; background:#333; padding:3px 8px; border-radius:4px; font-size:12px; }
</style>
</head>
<body>

<header>
 <button onclick="filterContent('all')">ðŸ•˜ Recientes</button>
 <button onclick="filterContent('movie')">ðŸŽ¬ PelÃ­culas</button>
 <button onclick="filterContent('series')">ðŸ“º Series</button>
</header>

<input type="text" id="search" placeholder="ðŸ” Buscar en catÃ¡logo...">

<div class="catalog-container" id="catalog"></div>

<script>
async function loadCatalog() {
  const response = await fetch('https://raw.githubusercontent.com/CineNube/CineNubeGallery/main/catalogo.json');
  const data = await response.json();

  const container = document.getElementById('catalog');
  container.innerHTML = '';

  data.forEach(item => {
    const card = document.createElement('div');
    card.className = 'card';

    let type = (item.type || 'movie').toLowerCase().trim();
    card.dataset.type = type;

    card.innerHTML = `
      <img src="${item.poster}" alt="${item.title}">
      <h3>${item.title}</h3>
      <span class="tag">${type}</span>
    `;

    card.onclick = () => window.location.href = `./ver.html?id=${item.tmdb || item.TMDB_ID}`;
    container.appendChild(card);
  });
}

function filterContent(category) {
  const cards = document.querySelectorAll('.card');
  cards.forEach(card => {
    card.style.display = (category === 'all' || card.dataset.type === category) ? 'block' : 'none';
  });
}

function normalize(str) {
  return str.normalize('NFD').replace(/[\u0300-\u036f]/g,"").toLowerCase();
}

document.getElementById("search").addEventListener("input", function() {
  const value = normalize(this.value);
  const cards = document.querySelectorAll('.card');

  cards.forEach(card => {
    const text = normalize(card.innerText);
    card.style.display = text.includes(value) ? 'block' : 'none';
  });
});

loadCatalog();
</script>

</body>
</html>
