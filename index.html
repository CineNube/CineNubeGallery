<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>CineNube Web</title>
<style>
  body { font-family: Arial; background: #000; color: #fff; margin:0; }
  .grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(150px, 1fr)); gap: 15px; padding: 20px; }
  .item { background: #111; padding: 10px; border-radius: 8px; }
  .item img { width: 100%; border-radius: 5px; }
</style>
</head>
<body>

<h1 style="text-align:center; margin-top:20px;">CineNube</h1>
<div id="catalogo" class="grid"></div>

<script>
const WEBAPP_URL = "TU_URL_DEL_WEBAPP";

async function cargarCatalogo() {
  document.getElementById("catalogo").innerHTML = "<p>Cargando...</p>";

  try {
    const response = await fetch(WEBAPP_URL, { redirect: "follow" });
    const html = await response.text();

    // Extraer array JSON inyectado
    const match = html.match(/const allItems = (.*?);<\/script>/);

    if (!match) {
      document.getElementById("catalogo").innerHTML = "<p>Error: No hay datos.</p>";
      return;
    }

    const items = JSON.parse(match[1]);

    document.getElementById("catalogo").innerHTML = items.map(i => `
      <div class="item">
        <img src="${i.poster}">
        <h3>${i.title}</h3>
        <p>${i.year}</p>
      </div>
    `).join("");
  } catch (e) {
    document.getElementById("catalogo").innerHTML = "<p>Error cargando datos.</p>";
  }
}

cargarCatalogo();
</script>

</body>
</html>
