<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>CineNube Gallery</title>
<link rel="stylesheet" href="catalogo.html">
<style>
body { font-family: 'Arial', sans-serif; margin:0; padding:0; background:#111; color:#fff;}
header { padding:20px; background:#1a1a1a; display:flex; justify-content:space-between; align-items:center; }
header h1 { margin:0; font-size:1.8em; color:#f5c518; }
.search-bar input { padding:8px; width:200px; border-radius:4px; border:none; }
nav { padding:10px; background:#222; text-align:center; }
nav button { margin:0 5px; padding:8px 16px; border:none; border-radius:4px; cursor:pointer; background:#444; color:#fff; }
nav button.active { background:#f5c518; color:#111; }
.grid { display:grid; grid-template-columns:repeat(auto-fill,minmax(180px,1fr)); gap:16px; padding:16px; }
.card { background:#1c1c1c; border-radius:8px; overflow:hidden; display:flex; flex-direction:column; }
.card img { width:100%; height:270px; object-fit:cover; }
.card-content { padding:10px; flex:1; display:flex; flex-direction:column; justify-content:space-between; }
.card-content h2 { font-size:1em; margin:0 0 8px; color:#f5c518; }
.card-content p { font-size:0.9em; margin:0 0 8px; line-height:1.2em; max-height:3.6em; overflow:hidden; }
.card-content .btns { display:flex; flex-wrap:wrap; gap:4px; margin-top:auto; }
.card-content .btns a { flex:1; text-align:center; text-decoration:none; background:#f5c518; color:#111; padding:6px 4px; border-radius:4px; font-size:0.85em; }
</style>
</head>
<body>
<header>
<h1>CineNube Gallery</h1>
<div class="search-bar">
<input type="text" id="searchInput" placeholder="Buscar...">
</div>
</header>
<nav>
<button class="filter-btn active" data-type="all">Todas</button>
<button class="filter-btn" data-type="movie">Pel√≠culas</button>
<button class="filter-btn" data-type="series">Series</button>
</nav>
<div class="grid" id="catalog"></div>
<script>
const SHEET_JSON_URL = 'https://script.google.com/macros/s/AKfycbx1Vq5HqmPMExtgm1PRgct2WRzGex5BTEtDERIKHA20VZNFf-umdHpiKD94Df80S2vO1g/exec';
let dataItems = [];

async function fetchData() {
  const res = await fetch(SHEET_JSON_URL);
  dataItems = await res.json();
  renderCatalog(dataItems);
}

function renderCatalog(items) {
  const catalog = document.getElementById('catalog');
  catalog.innerHTML = '';
  items.forEach(item => {
    const card = document.createElement('div');
    card.className = 'card';
    card.innerHTML = `
      <img src="${item.poster}" alt="${item.title}">
      <div class="card-content">
        <h2>${item.title} ${item.year? '| '+item.year:''}</h2>
        <p>${item.overview}</p>
        <div class="btns">
          ${item.type==='movie' && item.terabox? `<a href="${item.terabox}" target="_blank">Ver Ahora</a>`:''}
          ${item.type==='series' && item.season_links.length>0? item.season_links.map(s=>`<a href="${s.link}" target="_blank">Temporada ${s.season}</a>`).join('') : ''}
        </div>
      </div>
    `;
    catalog.appendChild(card);
  });
}

document.querySelectorAll('.filter-btn').forEach(btn=>{
  btn.addEventListener('click',()=> {
    document.querySelectorAll('.filter-btn').forEach(b=>b.classList.remove('active'));
    btn.classList.add('active');
    const type = btn.dataset.type;
    renderCatalog(type==='all'?dataItems:dataItems.filter(d=>d.type===type));
  });
});

document.getElementById('searchInput').addEventListener('input',(e)=>{
  const q = e.target.value.toLowerCase();
  renderCatalog(dataItems.filter(d=>d.title.toLowerCase().includes(q)));
});

fetchData();
</script>
</body>
</html>
