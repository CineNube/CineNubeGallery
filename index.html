<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<title>CineNube</title>
<style>
  body {
    font-family: 'Segoe UI', Arial, sans-serif;
    background: #0e0e0e;
    color: #f2f2f2;
    margin: 0;
    padding: 0;
  }

  header {
    background: #111;
    padding: 20px;
    text-align: center;
    font-size: 1.8em;
    font-weight: bold;
    color: #fff;
    letter-spacing: 1px;
  }

  #catalogo {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(220px, 1fr));
    gap: 20px;
    padding: 20px;
  }

  .item {
    background: #1b1b1b;
    border-radius: 10px;
    overflow: hidden;
    box-shadow: 0 0 10px rgba(0,0,0,0.5);
    transition: transform 0.2s ease;
  }

  .item:hover {
    transform: scale(1.03);
  }

  .item img {
    width: 100%;
    height: 330px;
    object-fit: cover;
  }

  .item h3 {
    font-size: 1.1em;
    margin: 10px;
    color: #fff;
  }

  .item p {
    font-size: 0.9em;
    color: #bbb;
    margin: 0 10px 10px;
    min-height: 40px;
  }

  .botones {
    display: flex;
    flex-wrap: wrap;
    justify-content: center;
    gap: 8px;
    padding: 10px;
  }

  .botones a, .botones span {
    display: inline-block;
    padding: 8px 12px;
    border-radius: 6px;
    background: #272727;
    color: #fff;
    text-decoration: none;
    font-size: 0.9em;
    transition: background 0.2s ease;
  }

  .botones a:hover {
    background: #0078ff;
  }

  .botones span {
    opacity: 0.6;
    cursor: default;
  }

  footer {
    text-align: center;
    padding: 15px;
    background: #111;
    color: #777;
    font-size: 0.85em;
  }
</style>
</head>

<body>
  <header>ðŸŽ¬ CineNube - Estrenos y Series</header>

  <div id="catalogo"></div>

  <footer>Â© 2025 CineNube. Todos los derechos reservados.</footer>

  <script>
  async function loadCatalog() {
    const response = await fetch('catalogo.json');
    const catalog = await response.json();
    showItems(catalog);
  }

  function showItems(items) {
    const container = document.getElementById('catalogo');
    container.innerHTML = '';

    items.forEach(item => {
      const card = document.createElement('div');
      card.className = 'item';

      const img = document.createElement('img');
      img.src = item.poster || 'sinimagen.jpg';
      img.alt = item.title;

      const title = document.createElement('h3');
      title.textContent = item.title;

      const overview = document.createElement('p');
      overview.textContent = item.overview || '';

      const buttonsDiv = document.createElement('div');
      buttonsDiv.className = 'botones';

      // ðŸ”¹ Obtener temporadas
      let seasonLinks = [];
      try {
        if (item.season_links && typeof item.season_links === "string") {
          seasonLinks = JSON.parse(item.season_links);
        } else if (Array.isArray(item.season_links)) {
          seasonLinks = item.season_links;
        }
      } catch (e) {
        console.log("Error parseando seasons:", e);
      }

      // ðŸ”¹ Crear botones segÃºn nÃºmero de temporadas
      if (item.type === "series") {
        if (seasonLinks.length > 1) {
          // Varias temporadas â†’ mostrar solo T1, T2, T3...
          seasonLinks.forEach((s, i) => {
            if (s.link && s.link.trim()) {
              const btn = document.createElement('a');
              btn.textContent = `ðŸ“º T${i + 1}`;
              btn.href = s.link;
              btn.target = "_blank";
              buttonsDiv.appendChild(btn);
            }
          });
        } else if (seasonLinks.length === 1 && seasonLinks[0].link) {
          // Solo una temporada
          const btn = document.createElement('a');
          btn.textContent = "ðŸ“º Ver temporada";
          btn.href = seasonLinks[0].link;
          btn.target = "_blank";
          buttonsDiv.appendChild(btn);
        } else {
          // Ninguna temporada con enlace vÃ¡lido
          const btn = document.createElement('span');
          btn.textContent = "ðŸ”’ Enlace no disponible";
          buttonsDiv.appendChild(btn);
        }
      } else if (item.type === "movie") {
        // PelÃ­culas
        const link = item.terabox || "";
        if (link && link.trim()) {
          const btn = document.createElement('a');
          btn.textContent = "ðŸŽ¥ Ver pelÃ­cula";
          btn.href = link;
          btn.target = "_blank";
          buttonsDiv.appendChild(btn);
        } else {
          const btn = document.createElement('span');
          btn.textContent = "ðŸ”’ Enlace no disponible";
          buttonsDiv.appendChild(btn);
        }
      }

      card.appendChild(img);
      card.appendChild(title);
      card.appendChild(overview);
      card.appendChild(buttonsDiv);
      container.appendChild(card);
    });
  }

  document.addEventListener('DOMContentLoaded', loadCatalog);
  </script>
</body>
</html>
