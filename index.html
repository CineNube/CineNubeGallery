<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>CineNube Gallery</title>
<style>
  body { font-family: Arial, sans-serif; background:#111; color:#eee; margin:0; padding:0;}
  .container { max-width:1000px; margin:auto; padding:20px;}
  .item { display:flex; background:#222; margin-bottom:15px; border-radius:8px; overflow:hidden; }
  .poster { flex-shrink:0; width:150px; height:225px; object-fit:cover; }
  .content { padding:15px; flex:1; }
  .title { font-size:18px; font-weight:bold; margin-bottom:5px; }
  .overview { font-size:14px; margin-bottom:5px; }
  .rating-year { font-size:13px; color:#ccc; margin-bottom:5px; }
  .buttons { margin-top:10px; }
  .buttons a { display:inline-block; margin:2px; padding:5px 10px; background:#ff5722; color:#fff; text-decoration:none; border-radius:4px; font-size:13px; }
  .buttons a:hover { background:#e64a19; }
</style>
</head>
<body>
<div class="container" id="itemsContainer">
  <h1>CineNube Gallery</h1>
</div>

<script>
const WEBAPP_URL = "https://script.google.com/macros/s/AKfycbx1Vq5HqmPMExtgm1PRgct2WRzGex5BTEtDERIKHA20VZNFf-umdHpiKD94Df80S2vO1g/exec";

function fetchItems(){
  fetch(WEBAPP_URL)
    .then(res=>res.json())
    .then(data=>{
      const container = document.getElementById("itemsContainer");
      container.innerHTML = "<h1>CineNube Gallery</h1>";
      data.forEach(item=>{
        const div = document.createElement("div");
        div.className = "item";
        let posterHtml = item.poster ? `<img src="${item.poster}" class="poster">` : "";
        let buttonsHtml = "";
        
        if(item.type && item.type.toLowerCase()==='series'){
          if(item.season_links && item.season_links.length>0){
            buttonsHtml = '<div class="buttons">';
            item.season_links.forEach(s=>{
              buttonsHtml += `<a href="${s.link}" target="_blank">Temporada ${s.season}</a>`;
            });
            buttonsHtml += '</div>';
          } else {
            buttonsHtml = '<div class="buttons">Sin temporadas disponibles</div>';
          }
        }
        if(item.type && item.type.toLowerCase()==='movie' && item.terabox){
          buttonsHtml = '<div class="buttons"><a href="'+item.terabox+'" target="_blank">Ver ahora</a></div>';
        }

        div.innerHTML = `
          ${posterHtml}
          <div class="content">
            <div class="title">${item.title}</div>
            <div class="overview">${item.overview||''}</div>
            <div class="rating-year">‚≠ê ${item.rating||'N/A'} | ${item.year||''}</div>
            ${buttonsHtml}
          </div>
        `;
        container.appendChild(div);
      });
    })
    .catch(err=>console.error(err));
}

fetchItems();
</script>
</body>
</html>
