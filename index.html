<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>CineNube</title>
<style>
body { font-family: Arial, sans-serif; background: #111; color: #eee; margin:0; padding:0;}
.container { width: 90%; margin: auto; padding:20px;}
.item { background:#1a1a1a; padding:15px; margin:10px 0; border-radius:8px;}
.item img { max-width:150px; float:left; margin-right:15px; border-radius:5px;}
.clear { clear:both;}
button { background:#ff5722; border:none; padding:5px 10px; color:white; cursor:pointer; border-radius:3px; margin-top:5px;}
button:hover { background:#e64a19;}
</style>
</head>
<body>
<div class="container" id="catalogo"></div>

<script>
async function loadCatalog() {
  try {
    const res = await fetch('https://script.google.com/macros/s/AKfycbx1Vq5HqmPMExtgm1PRgct2WRzGex5BTEtDERIKHA20VZNFf-umdHpiKD94Df80S2vO1g/exec');
    const data = await res.json();
    const container = document.getElementById('catalogo');
    container.innerHTML = '';
    data.forEach(item => {
      let html = `<div class="item">
        <img src="${item.poster}" alt="${item.title}">
        <h3>${item.title}</h3>
        <p>${item.overview}</p>
        <p>‚≠ê ${item.rating} | ${item.year} | ${item.type}</p>`;
      if(item.type.toLowerCase() === 'series' && item.season_links){
        item.season_links.forEach((s,i)=>{
          html += `<button onclick="window.open('${s.link}','_blank')">Temporada ${i+1}</button> `;
        });
      } else if(item.type.toLowerCase() === 'movie' && item.terabox){
        html += `<button onclick="window.open('${item.terabox}','_blank')">Ver ahora</button>`;
      }
      html += `<div class="clear"></div></div>`;
      container.innerHTML += html;
    });
  } catch(err) { console.error(err); }
}

loadCatalog();
</script>
</body>
</html>
