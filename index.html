<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>CineNube Gallery</title>
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css">
<style>
body {
  background-color: #0d0d0d;
  color: #fff;
  font-family: 'Poppins', sans-serif;
}
header {
  text-align: center;
  padding: 2rem 0;
}
section {
  margin: 2rem auto;
  max-width: 1200px;
}
.card {
  background-color: #1a1a1a;
  border: none;
  border-radius: 12px;
  overflow: hidden;
  transition: transform 0.2s ease;
}
.card:hover { transform: scale(1.05); }
.card img {
  width: 100%;
  height: 350px;
  object-fit: cover;
}
.card-body { padding: 1rem; }
.card-title { font-size: 1rem; font-weight: bold; color: #fff; }
.btn-ver {
  background-color: #e50914;
  color: #fff;
  border: none;
  border-radius: 20px;
  padding: 6px 14px;
  text-decoration: none;
  display: inline-block;
}
h2 {
  border-left: 4px solid #e50914;
  padding-left: 10px;
  margin-bottom: 1rem;
}
footer {
  text-align: center;
  padding: 2rem;
  color: #aaa;
}
</style>
</head>
<body>
<header>
  <h1>ğŸ¬ CineNube Gallery</h1>
</header>

<section id="recientes-section">
  <h2>ğŸ”¥ Recientes</h2>
  <div id="recientes" class="row g-3"></div>
</section>

<section>
  <h2>ğŸ¥ PelÃ­culas</h2>
  <div id="peliculas" class="row g-3"></div>
</section>

<section>
  <h2>ğŸ“º Series</h2>
  <div id="series" class="row g-3"></div>
</section>

<footer>Â© 2025 CineNube Gallery</footer>

<script>
const SHEET_URL = "https://script.google.com/macros/s/AKfycbz0AxlhwQ5-8hnnRMnhP8S-i0xQoUg3iWoEYXbT5o_ltCpR7mAIZqPaHqccFzkC34cLbw/exec";

async function cargarDatos() {
  try {
    const res = await fetch(SHEET_URL);
    const data = await res.json();
    if (!Array.isArray(data)) return;

    // Orden descendente (mÃ¡s reciente primero)
    const ordenado = data.reverse();

    const peliculas = ordenado.filter(item => item.type?.toLowerCase() === "pelicula");
    const series = ordenado.filter(item => item.type?.toLowerCase() === "serie");

    mostrarContenido(peliculas.slice(0, 4), "recientes");
    mostrarContenido(peliculas, "peliculas");
    mostrarContenido(series, "series");

    // Oculta la secciÃ³n "Recientes" si estÃ¡ vacÃ­a
    if (peliculas.length === 0) document.getElementById("recientes-section").style.display = "none";

  } catch (err) {
    console.error("Error al cargar:", err);
  }
}

function mostrarContenido(lista, contenedorId) {
  const contenedor = document.getElementById(contenedorId);
  contenedor.innerHTML = "";
  lista.forEach(item => {
    const imagen = item.poster?.startsWith("http")
      ? item.poster
      : `https://image.tmdb.org/t/p/w500${item.poster}`;
    const botonTemp = item.type?.toLowerCase() === "serie" && item.season_links
      ? `<a href="${item.season_links}" target="_blank" class="btn-ver">ğŸ“º Ver temporadas</a>`
      : "";
    const card = `
      <div class="col-6 col-md-3">
        <div class="card">
          <img src="${imagen}" alt="${item.title}">
          <div class="card-body">
            <h5 class="card-title">${item.title || "Sin tÃ­tulo"}</h5>
            <p class="mb-1">â­ï¸ ${item.rating || "N/A"} | ğŸ“… ${item.year || ""}</p>
            ${botonTemp}
          </div>
        </div>
      </div>`;
    contenedor.innerHTML += card;
  });
}

cargarDatos();
</script>
</body>
</html>
